name: Deploy Surge + Notificacion NTFY

on:
  push:
    branches:
      - main

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Clonar repositorio
        uses: actions/checkout@v3

      - name: Instalar Node
        uses: actions/setup-node@v3
        with:
          node-version: '18'

      - name: Instalar Surge
        run: npm install -g surge

      - name: Deploy a Surge
        run: surge ./ mini-tienda-itla12.surge.sh --token ${{ secrets.SURGE_TOKEN }}

      - name: Enviar notificaciÃ³n a ntfy
        run: |
          curl -H "Title: Deploy exitoso ðŸš€" \
               -H "Priority: high" \
               -d "La pÃ¡gina fue desplegada correctamente en Surge.sh" \
               https://ntfy.sh/devops-itla12
